/*!
 * A lightweight, dependency-free and responsive javascript plugin for particle backgrounds.
 *
 * @author Marc Bruederlin <hello@marcbruederlin.com>
 * @version 2.0.2
 * @license MIT
 * @see https://github.com/marcbruederlin/particles.js
 */
var Particles=function(t,e){"use strict";var n,o={};return n=function(){return function(){var t=this;t.defaults={responsive:null,selector:null,maxParticles:100,sizeVariations:3,speed:.5,color:"#000000",minDistance:120,connectParticles:!1},t.element=null,t.context=null,t.ratio=null,t.breakpoints=[],t.activeBreakpoint=null,t.breakpointSettings=[],t.originalSettings=null,t.storage=[],t.usingPolyfill=!1}}(),n.prototype.init=function(t){var e=this;return e.options=e._extend(e.defaults,t),e.options.color=t.color?e._hex2rgb(t.color):e._hex2rgb(e.defaults.color),e.originalSettings=JSON.parse(JSON.stringify(e.options)),e._initializeCanvas(),e._initializeEvents(),e._registerBreakpoints(),e._checkResponsive(),e._initializeStorage(),e._animate(),e},n.prototype._initializeCanvas=function(){var n,o,i=this;if(!i.options.selector)return console.warn("particles.js: No selector specified! Check https://github.com/marcbruederlin/particles.js#options"),!1;i.element=e.querySelector(i.options.selector),i.context=i.element.getContext("2d"),n=t.devicePixelRatio||1,o=i.context.webkitBackingStorePixelRatio||i.context.mozBackingStorePixelRatio||i.context.msBackingStorePixelRatio||i.context.oBackingStorePixelRatio||i.context.backingStorePixelRatio||1,i.ratio=n/o,i.element.width=i.element.offsetParent.clientWidth*i.ratio,"BODY"==i.element.offsetParent.nodeName?i.element.height=t.innerHeight*i.ratio:i.element.height=i.element.offsetParent.clientHeight*i.ratio,i.element.style.width="100%",i.element.style.height="100%",i.context.scale(i.ratio,i.ratio)},n.prototype._initializeEvents=function(){var e=this;t.addEventListener("resize",e._resize.bind(e),!1)},n.prototype._initializeStorage=function(){var t=this;t.storage=[];for(var e=t.options.maxParticles;e--;)t.storage.push(new o(t.context,t.options))},n.prototype._registerBreakpoints=function(){var t,e,n,o=this,i=o.options.responsive||null;if("object"==typeof i&&null!==i&&i.length){for(t in i)if(n=o.breakpoints.length-1,e=i[t].breakpoint,i.hasOwnProperty(t)){for(i[t].options.color&&(i[t].options.color=o._hex2rgb(i[t].options.color));n>=0;)o.breakpoints[n]&&o.breakpoints[n]===e&&o.breakpoints.splice(n,1),n--;o.breakpoints.push(e),o.breakpointSettings[e]=i[t].options}o.breakpoints.sort(function(t,e){return e-t})}},n.prototype._checkResponsive=function(){var e,n=this,o=!1,i=t.innerWidth;if(n.options.responsive&&n.options.responsive.length&&null!==n.options.responsive){o=null;for(e in n.breakpoints)n.breakpoints.hasOwnProperty(e)&&i<=n.breakpoints[e]&&(o=n.breakpoints[e]);null!==o?(n.activeBreakpoint=o,n.options=n._extend(n.options,n.breakpointSettings[o])):null!==n.activeBreakpoint&&(n.activeBreakpoint=null,o=null,n.options=n._extend(n.options,n.originalSettings))}},n.prototype._refresh=function(){var t=this;t._initializeStorage(),t._update()},n.prototype._resize=function(){var e=this;e.element.width=e.element.offsetParent.clientWidth*e.ratio,"BODY"==e.element.offsetParent.nodeName?e.element.height=t.innerHeight*e.ratio:e.element.height=e.element.offsetParent.clientHeight*e.ratio,e.context.scale(e.ratio,e.ratio),clearTimeout(e.windowDelay),e.windowDelay=t.setTimeout(function(){e._checkResponsive(),e._refresh()},50)},n.prototype._animate=function(){var e=this;e._draw(),e._animation=t.requestAnimFrame(e._animate.bind(e))},n.prototype.resumeAnimation=function(){var t=this;!t._animation&&t._animate()},n.prototype.pauseAnimation=function(){var e=this;e._animation&&(e.usingPolyfill?t.clearTimeout(e._animation):(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame)(e._animation),e._animation=null)},n.prototype._draw=function(){var t=this;t.context.clearRect(0,0,t.element.width,t.element.height);for(var e=t.storage.length;e--;)t.storage[e]._draw();t._update()},n.prototype._update=function(){var e=this,n=e.element.offsetParent.clientWidth;if("BODY"==e.element.offsetParent.nodeName)o=t.innerHeight;else var o=e.element.offsetParent.clientHeight;for(var i=e.storage.length;i--;){var r=e.storage[i];if(r.x+=r.vx,r.y+=r.vy,r.x+r.radius>n?r.x=r.radius:r.x-r.radius<0&&(r.x=n-r.radius),r.y+r.radius>o?r.y=r.radius:r.y-r.radius<0&&(r.y=o-r.radius),e.options.connectParticles)for(var a=i+1;a<e.storage.length;a++){var s=e.storage[a];e._calculateDistance(r,s)}}},n.prototype._calculateDistance=function(t,e){var n,o=this,i=t.x-e.x,r=t.y-e.y;(n=Math.sqrt(i*i+r*r))<=o.options.minDistance&&(o.context.beginPath(),o.context.strokeStyle="rgba("+o.options.color.r+", "+o.options.color.g+", "+o.options.color.b+", "+(1.2-n/o.options.minDistance)+")",o.context.moveTo(t.x,t.y),o.context.lineTo(e.x,e.y),o.context.stroke(),o.context.closePath())},n.prototype._extend=function(t,e){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t},n.prototype._hex2rgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},o=function(n,o){var i=this;i.context=n,i.options=o;var r=e.querySelector(i.options.selector);i.x=Math.random()*r.offsetParent.clientWidth,"BODY"==r.offsetParent.nodeName?i.y=Math.random()*t.innerHeight:i.y=Math.random()*r.offsetParent.clientHeight,i.vx=Math.random()*i.options.speed*2-i.options.speed,i.vy=Math.random()*i.options.speed*2-i.options.speed,i.radius=Math.random()*Math.random()*i.options.sizeVariations,i._draw()},o.prototype._draw=function(){var t=this;t.context.fillStyle="rgb("+t.options.color.r+", "+t.options.color.g+", "+t.options.color.b+")",t.context.beginPath(),t.context.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),t.context.fill()},t.requestAnimFrame=function(){var e=this,n=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame;return n||(e._usingPolyfill=!0,function(e){return t.setTimeout(e,1e3/60)})}(),new n}(window,document);!function(){"use strict";"function"==typeof define&&define.amd?define("Particles",function(){return Particles}):"undefined"!=typeof module&&module.exports?module.exports=Particles:window.Particles=Particles}();